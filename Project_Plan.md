# 项目排期与任务分解 (Phase 1 - Evolving Persona MVP)

## 1. 总体目标

在六周内，完成MVP（最小可行产品）的开发、测试和部署。MVP的核心是上线一个**具备基于30个小面的人格模型、并通过增量心理分析能自然演化的对话助手**。

## 2. 工作分解结构 (Work Breakdown Structure - WBS)

### Epic 1: 基础架构搭建
* **目标**: 为所有后端服务准备好运行环境和依赖。
* **负责人**: Tech Lead

| Task ID | 任务描述 | 依赖 | 估时 (天) |
| :--- | :--- | :--- | :--- |
| **TSK-01** | 初始化Git仓库，配置基础CI/CD流水线 | - | 1 |
| **TSK-02** | 部署并配置向量数据库 (Qdrant) | - | 1 |
| **TSK-03** | **编写脚本以创建`persona.db`文件并初始化表结构** | - | 1 |
| **TSK-04** | 搭建并配置API Gateway | - | 1 |

### Epic 2: 后端服务开发
* **目标**: 完成所有核心后端微服务的开发和联调，**核心是人格演化引擎**。
* **负责人**: Backend Team

| Task ID | 任务描述 | 依赖 | 估时 (天) |
| :--- | :--- | :--- | :--- |
| **TSK-05** | 开发LLM Service，封装对高级LLM的调用 | - | 2 |
| **TSK-06** | 开发Memory Service：实现记忆的存储与检索 | TSK-02 | 3 |
| **TSK-07** | **开发人格演化引擎 (Persona Evolution Engine)** | TSK-03, TSK-05 | **10** |
| *TSK-07.1*| *子任务: 实现30小面数据模型及CRUD接口* | *TSK-03* | *(2)* |
| *TSK-07.2*| *子任务: 实现上下文聚合逻辑* | *TSK-06* | *(2)* |
| *TSK-07.3*| *子任务: 实现对分析型LLM的调用与JSON解析* | *TSK-05* | *(3)* |
| *TSK-07.4*| *子任务: 实现异步化的增量状态更新与持久化*| *TSK-07.1* | *(3)* |
| **TSK-08** | 开发Chat Service：编排各服务，构建对话流 | TSK-05, TSK-06, TSK-07| 3 |
| **TSK-09**| 编写后端服务的单元测试和集成测试 | TSK-08 | 4 |

### Epic 3: 前端界面开发
* **目标**: 开发用户可交互的聊天界面和人格观察报告。
* **负责人**: Frontend Team

| Task ID | 任务描述 | 依赖 | 估时 (天) |
| :--- | :--- | :--- | :--- |
| **TSK-10** | 搭建主聊天界面的基本组件 | - | 3 |
| **TSK-11** | 对接`/chat` API，实现对话发送、接收、展示，并包含人格化反馈 | TSK-08 | 2 |
| **TSK-12** | **开发人格观察报告页面** | TSK-08 (对应API) | **5** |
| *TSK-12.1*| *子任务: 对接`/persona/{id}` API获取30小面数据* | *TSK-08* | *(1)* |
| *TSK-12.2*| *子任务: 实现五个独立的雷达图可视化组件* | - | *(3)* |
| *TSK-12.3*| *子任务: 实现关键特质的自动解读文本展示* | - | *(1)* |
| **TSK-13** | 实现前端构建和打包配置 | TSK-10 | 1 |

### Epic 4: 测试与部署
* **目标**: 确保MVP版本的质量并正式上线。
* **负责人**: QA Lead, DevOps

| Task ID | 任务描述 | 依赖 | 估时 (天) |
| :--- | :--- | :--- | :--- |
| **TSK-14** | 制定并执行端到端(E2E)测试用例 | TSK-09, TSK-11 | 3 |
| **TSK-15** | 执行性能测试和**细粒度人格一致性**基准测试 | TSK-14 | 3 |
| **TSK-16** | 准备生产环境，编写部署脚本 | TSK-01, TSK-13 | 2 |
| **TSK-17** | **[里程碑]** 完成MVP版本向生产环境的部署 | TSK-15, TSK-16 | 1 |
| **E-05** | **主动式智能体功能开发 (Phase 2)** |                               | 开发AI主动感知与辅助的核心功能。                                          | **15**    | Gemini |
|        |                              | TSK-18: 开发并集成`Sentinel Service`                  | 实现本地轻量模型(如Qwen2)的加载与运行。                                     | 3         | Gemini |
|        |                              | TSK-19: 开发外部数据源连接器                            | 为`Sentinel Service`开发访问日历、待办事项、新闻等API的插件。             | 3         | Gemini |
|        |                              | TSK-20: 实现触发器逻辑和MCP生成                         | 在`Sentinel Service`中实现基于规则的事件检测和MCP Payload的构建。         | 2         | Gemini |
|        |                              | TSK-21: 在`Chat Service`中实现`Executor`逻辑        | 改造`Chat Service`以接收和处理MCP，并调用执行者模型生成主动对话。        | 3         | Gemini |
|        |                              | TSK-22: 对接人格演化引擎                                | 更新`Persona Evolution Engine`的输入管道，确保能处理来自`Executor`的对话历史。 | 1         | Gemini |
|        |                              | TSK-23: 实现前端主动性设置界面                          | 根据`UI_UX_Design.md`开发前端设置页面，允许用户配置主动性功能。           | 2         | Gemini |
|        |                              | TSK-24: 编写新功能E2E测试用例                         | 编写并执行覆盖完整"感知-触发-交互"链路的端到端测试。                      | 1         | Gemini |

## 3. 简版甘特图 (Gantt Chart)

* **Phase 1: MVP - Evolving Persona Engine (6周)**
  - **Week 1-2**: `[======]` Epic 1: 基础架构搭建 (TSK-01 to TSK-04) & Epic 2: 后端开发启动 (TSK-05, TSK-06)
  - **Week 3-4**: `[======]` Epic 2: 攻坚人格演化引擎 & 后端收尾 (TSK-07, TSK-08)
  - **Week 3-5**: `[======]` Epic 3: 前端开发 (TSK-10 to TSK-13)
  - **Week 5-6**: `[======]` Epic 2 & 3: 测试与Bug修复 (TSK-09) & Epic 4: 最终测试与部署 (TSK-14 to TSK-17)

* **Phase 2: Proactive Agent (3周)**
  - **Week 7**: `[======]` Epic 5: Sentinel后端开发 (TSK-18, TSK-19)
  - **Week 8**: `[======]` Epic 5: 核心逻辑与前端 (TSK-20, TSK-21, TSK-23)
  - **Week 9**: `[======]` Epic 5: 集成、测试与收尾 (TSK-22, TSK-24)

* **MVP Release** 